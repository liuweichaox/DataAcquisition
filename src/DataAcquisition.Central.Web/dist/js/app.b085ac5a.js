(()=>{"use strict";var e={68680(e,t,r){r(23792),r(3362),r(69085),r(9391);var n=r(45130),a=r(59258),i=r(56768),l={class:"nav"},s={class:"main"};function o(e,t){var r=(0,i.g2)("router-link"),n=(0,i.g2)("router-view");return(0,i.uX)(),(0,i.CE)("div",null,[(0,i.Lk)("nav",l,[(0,i.bF)(r,{to:"/edges"},{default:(0,i.k6)(function(){return(0,a.A)(t[0]||(t[0]=[(0,i.eW)("Edges",-1)]))}),_:1}),(0,i.bF)(r,{to:"/metrics"},{default:(0,i.k6)(function(){return(0,a.A)(t[1]||(t[1]=[(0,i.eW)("Metrics",-1)]))}),_:1}),(0,i.bF)(r,{to:"/logs"},{default:(0,i.k6)(function(){return(0,a.A)(t[2]||(t[2]=[(0,i.eW)("Logs",-1)]))}),_:1}),t[3]||(t[3]=(0,i.Lk)("a",{href:"/metrics",target:"_blank",rel:"noreferrer"},"Central /metrics (raw)",-1))]),(0,i.Lk)("main",s,[(0,i.bF)(n)])])}var c=r(71241);const u={},d=(0,c.A)(u,[["render",o],["__scopeId","data-v-9e495b48"]]),v=d;var f=r(98728),p=r(24232),h={class:"page"},g={class:"header"},k=["disabled"],m={key:0,class:"error"},_={key:1,class:"table"},b={class:"errcell"},y={key:2,class:"empty"};function L(e,t,r,n,a,l){return(0,i.uX)(),(0,i.CE)("div",h,[(0,i.Lk)("header",g,[t[1]||(t[1]=(0,i.Lk)("h1",null,"è¾¹ç¼˜èŠ‚ç‚¹ï¼ˆedge_idï¼‰",-1)),(0,i.Lk)("button",{onClick:t[0]||(t[0]=function(){return l.load&&l.load.apply(l,arguments)}),disabled:a.loading},(0,p.v_)(a.loading?"åˆ·æ–°ä¸­...":"åˆ·æ–°"),9,k)]),t[3]||(t[3]=(0,i.Lk)("p",{class:"hint"},[(0,i.eW)(" åç«¯ï¼š"),(0,i.Lk)("code",null,"DataAcquisition.Central.Api"),(0,i.eW)("ï¼ˆé»˜è®¤ "),(0,i.Lk)("code",null,"http://localhost:8000"),(0,i.eW)("ï¼‰ï¼› å‰ç«¯ devServer é€šè¿‡ä»£ç†è®¿é—® "),(0,i.Lk)("code",null,"/api"),(0,i.eW)("ã€‚ ")],-1)),a.error?((0,i.uX)(),(0,i.CE)("p",m,(0,p.v_)(a.error),1)):(0,i.Q3)("",!0),a.edges.length?((0,i.uX)(),(0,i.CE)("table",_,[t[2]||(t[2]=(0,i.Lk)("thead",null,[(0,i.Lk)("tr",null,[(0,i.Lk)("th",null,"edge_id"),(0,i.Lk)("th",null,"hostname"),(0,i.Lk)("th",null,"version"),(0,i.Lk)("th",null,"last_seen_utc"),(0,i.Lk)("th",null,"buffer_backlog"),(0,i.Lk)("th",null,"last_error")])],-1)),(0,i.Lk)("tbody",null,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(a.edges,function(e){var t;return(0,i.uX)(),(0,i.CE)("tr",{key:e.edgeId},[(0,i.Lk)("td",null,[(0,i.Lk)("code",null,(0,p.v_)(e.edgeId),1)]),(0,i.Lk)("td",null,(0,p.v_)(e.hostname||"-"),1),(0,i.Lk)("td",null,(0,p.v_)(e.version||"-"),1),(0,i.Lk)("td",null,(0,p.v_)(e.lastSeenUtc),1),(0,i.Lk)("td",null,(0,p.v_)(null!==(t=e.bufferBacklog)&&void 0!==t?t:"-"),1),(0,i.Lk)("td",b,(0,p.v_)(e.lastError||"-"),1)])}),128))])])):a.loading||a.error?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("p",y,"æš‚æ— è¾¹ç¼˜èŠ‚ç‚¹ï¼ˆå…ˆè°ƒç”¨ /api/edges/register æˆ– /api/edges/heartbeatï¼‰ã€‚"))])}var w=r(20908),C=r(30388);r(16280),r(76918),r(28706),r(26099);function A(e){return M.apply(this,arguments)}function M(){return M=(0,C.A)((0,w.A)().m(function e(t){var r,n;return(0,w.A)().w(function(e){while(1)switch(e.n){case 0:return e.n=1,fetch(t,{headers:{Accept:"application/json"}});case 1:if(r=e.v,r.ok){e.n=3;break}return e.n=2,r.text()["catch"](function(){return""});case 2:throw n=e.v,new Error("HTTP ".concat(r.status," ").concat(r.statusText).concat(n?": ".concat(n):""));case 3:return e.n=4,r.json();case 4:return e.a(2,e.v)}},e)})),M.apply(this,arguments)}const E={name:"EdgesView",data:function(){return{edges:[],loading:!1,error:""}},mounted:function(){this.load()},methods:{load:function(){var e=this;return(0,C.A)((0,w.A)().m(function t(){var r;return(0,w.A)().w(function(t){while(1)switch(t.p=t.n){case 0:return e.loading=!0,e.error="",t.p=1,t.n=2,A("/api/edges");case 2:e.edges=t.v,t.n=4;break;case 3:t.p=3,r=t.v,e.error=(null===r||void 0===r?void 0:r.message)||String(r);case 4:return t.p=4,e.loading=!1,t.f(4);case 5:return t.a(2)}},t,null,[[1,3,4,5]])}))()}}},X=(0,c.A)(E,[["render",L],["__scopeId","data-v-00fcc358"]]),x=X;r(94490),r(34782),r(79432);var F={class:"page"},S={class:"page-header"},W={class:"refresh-info"},q={key:0},V={key:1},T={class:"header-actions"},I={class:"filter-actions"},O={key:1,class:"center"},j={key:2,class:"center"},z={key:3},K={class:"stats-grid"},U={class:"metric-header"},Q={class:"metric-title"},P={key:0},$={class:"metric-value"},D={key:0,class:"metric-description"},J={key:1,class:"metric-tags"},N={key:2,class:"chart-wrapper"},B=["id"];function R(e,t,r,l,s,o){var c=(0,i.g2)("el-button"),u=(0,i.g2)("el-link"),d=(0,i.g2)("el-option"),v=(0,i.g2)("el-select"),f=(0,i.g2)("el-col"),h=(0,i.g2)("el-input"),g=(0,i.g2)("el-row"),k=(0,i.g2)("el-card"),m=(0,i.g2)("el-alert"),_=(0,i.g2)("el-text"),b=(0,i.g2)("el-empty"),y=(0,i.g2)("el-statistic"),L=(0,i.g2)("el-tag"),w=(0,i.g2)("el-divider"),C=(0,i.g2)("el-table-column"),A=(0,i.g2)("el-table");return(0,i.uX)(),(0,i.CE)("div",F,[(0,i.Lk)("div",S,[(0,i.Lk)("div",null,[t[2]||(t[2]=(0,i.Lk)("h2",{class:"title"},"ç³»ç»ŸæŒ‡æ ‡ç›‘æ§",-1)),(0,i.Lk)("div",W,[s.lastUpdate?((0,i.uX)(),(0,i.CE)("span",q,"æœ€åæ›´æ–°: "+(0,p.v_)(s.lastUpdate),1)):((0,i.uX)(),(0,i.CE)("span",V,"æ­£åœ¨åŠ è½½..."))])]),(0,i.Lk)("div",T,[(0,i.bF)(c,{type:"primary",onClick:o.loadMetrics,loading:s.loading},{default:(0,i.k6)(function(){return(0,a.A)(t[3]||(t[3]=[(0,i.eW)(" åˆ·æ–° ",-1)]))}),_:1},8,["onClick","loading"]),(0,i.bF)(u,{class:"raw",underline:!1,href:"/metrics",target:"_blank",rel:"noreferrer"},{default:(0,i.k6)(function(){return(0,a.A)(t[4]||(t[4]=[(0,i.eW)(" æ‰“å¼€ /metrics åŸå§‹é¡µ ",-1)]))}),_:1})])]),(0,i.bF)(k,{class:"filter-card",shadow:"never"},{default:(0,i.k6)(function(){return[(0,i.bF)(g,{gutter:20},{default:(0,i.k6)(function(){return[(0,i.bF)(f,{span:12},{default:(0,i.k6)(function(){return[(0,i.bF)(v,{modelValue:s.selectedMetrics,"onUpdate:modelValue":t[0]||(t[0]=function(e){return s.selectedMetrics=e}),multiple:"",clearable:"","collapse-tags":"",filterable:"",placeholder:"é€‰æ‹©è¦å±•ç¤ºçš„æŒ‡æ ‡",style:{width:"100%"}},{default:(0,i.k6)(function(){return[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(s.availableMetrics,function(e){return(0,i.uX)(),(0,i.Wv)(d,{key:e,label:o.getMetricTitle(e),value:e},null,8,["label","value"])}),128))]}),_:1},8,["modelValue"])]}),_:1}),(0,i.bF)(f,{span:6},{default:(0,i.k6)(function(){return[(0,i.bF)(h,{modelValue:s.searchKeyword,"onUpdate:modelValue":t[1]||(t[1]=function(e){return s.searchKeyword=e}),placeholder:"æœç´¢æŒ‡æ ‡åç§°",clearable:"",onKeyup:(0,n.jR)(o.searchMetrics,["enter"])},{prefix:(0,i.k6)(function(){return(0,a.A)(t[5]||(t[5]=[(0,i.eW)("ğŸ”",-1)]))}),_:1},8,["modelValue","onKeyup"])]}),_:1}),(0,i.bF)(f,{span:6},{default:(0,i.k6)(function(){return[(0,i.Lk)("div",I,[(0,i.bF)(c,{type:"primary",onClick:o.searchMetrics,loading:s.loading},{default:(0,i.k6)(function(){return(0,a.A)(t[6]||(t[6]=[(0,i.eW)("æœç´¢",-1)]))}),_:1},8,["onClick","loading"]),(0,i.bF)(c,{onClick:o.clearFilters},{default:(0,i.k6)(function(){return(0,a.A)(t[7]||(t[7]=[(0,i.eW)("æ¸…ç©º",-1)]))}),_:1},8,["onClick"])])]}),_:1})]}),_:1})]}),_:1}),s.error?((0,i.uX)(),(0,i.Wv)(m,{key:0,title:s.error,type:"error",closable:!1,class:"mb"},null,8,["title"])):(0,i.Q3)("",!0),s.loading&&!s.metrics?((0,i.uX)(),(0,i.CE)("div",O,[(0,i.bF)(_,{type:"info"},{default:(0,i.k6)(function(){return(0,a.A)(t[8]||(t[8]=[(0,i.eW)("æ­£åœ¨åŠ è½½æŒ‡æ ‡æ•°æ®...",-1)]))}),_:1})])):s.metrics&&0===Object.keys(s.metrics).length?((0,i.uX)(),(0,i.CE)("div",j,[(0,i.bF)(b,{description:"æš‚æ— æŒ‡æ ‡æ•°æ®ï¼Œè¯·ç¡®ä¿ç³»ç»Ÿæ­£åœ¨è¿è¡Œå¹¶äº§ç”ŸæŒ‡æ ‡"})])):s.metrics?((0,i.uX)(),(0,i.CE)("div",z,[(0,i.bF)(k,{class:"metric-card",shadow:"hover"},{header:(0,i.k6)(function(){return(0,a.A)(t[9]||(t[9]=[(0,i.Lk)("div",{class:"metric-header"},[(0,i.Lk)("span",{class:"metric-title"},"å…³é”®æŒ‡æ ‡æ¦‚è§ˆ")],-1)]))}),default:(0,i.k6)(function(){return[(0,i.Lk)("div",K,[(0,i.bF)(y,{title:"é‡‡é›†å»¶è¿Ÿ",value:o.getMetricValue("data_acquisition_collection_latency_ms"),suffix:"ms"},null,8,["value"]),(0,i.bF)(y,{title:"é‡‡é›†é¢‘ç‡",value:o.getMetricValue("data_acquisition_collection_rate"),suffix:"points/s"},null,8,["value"]),(0,i.bF)(y,{title:"é˜Ÿåˆ—æ·±åº¦",value:o.getMetricValue("data_acquisition_queue_depth"),suffix:"messages"},null,8,["value"]),(0,i.bF)(y,{title:"é”™è¯¯æ€»æ•°",value:o.getMetricValue("data_acquisition_errors_total")},null,8,["value"])])]}),_:1}),((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(o.filteredMetrics,function(e,t){return(0,i.uX)(),(0,i.Wv)(k,{key:t,class:"metric-card",shadow:"hover"},{header:(0,i.k6)(function(){return[(0,i.Lk)("div",U,[(0,i.Lk)("span",Q,(0,p.v_)(o.getMetricTitle(t)),1),null!==e&&void 0!==e&&e.type?((0,i.uX)(),(0,i.Wv)(L,{key:0,type:o.getMetricType(e.type)},{default:(0,i.k6)(function(){return[(0,i.eW)((0,p.v_)(e.type),1)]}),_:2},1032,["type"])):(0,i.Q3)("",!0)])]}),default:(0,i.k6)(function(){var r,n,a;return[null!==e&&void 0!==e&&e.data&&e.data.length>0?((0,i.uX)(),(0,i.CE)("div",P,[(0,i.Lk)("div",$,(0,p.v_)(o.formatMetricValue(t,null!==(r=null===(n=o.getLatestValue(e.data))||void 0===n?void 0:n.value)&&void 0!==r?r:o.getLatestValue(e.data))),1),e.help?((0,i.uX)(),(0,i.CE)("div",D,(0,p.v_)(e.help),1)):(0,i.Q3)("",!0),null!==(a=o.getLatestValue(e.data))&&void 0!==a&&a.labels?((0,i.uX)(),(0,i.CE)("div",J,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(o.getLatestValue(e.data).labels,function(e,t){return(0,i.uX)(),(0,i.Wv)(L,{key:t,size:"small",style:{"margin-right":"8px","margin-bottom":"8px"}},{default:(0,i.k6)(function(){return[(0,i.Lk)("strong",null,(0,p.v_)(t)+":",1),(0,i.eW)(" "+(0,p.v_)(e),1)]}),_:2},1024)}),128))])):(0,i.Q3)("",!0),e.data.length>1?((0,i.uX)(),(0,i.CE)("div",N,[(0,i.bF)(w),(0,i.Lk)("div",{id:"chart-"+t,style:{height:"250px"}},null,8,B)])):(0,i.Q3)("",!0),e.data.length>0?((0,i.uX)(),(0,i.Wv)(A,{key:3,data:e.data.slice(-10).reverse(),size:"small",style:{"margin-top":"15px"},"max-height":"200"},{default:(0,i.k6)(function(){return[(0,i.bF)(C,{prop:"value",label:"å€¼",width:"140"},{default:(0,i.k6)(function(e){return[(0,i.eW)((0,p.v_)(o.formatMetricValue(t,e.row.value)),1)]}),_:2},1024),(0,i.bF)(C,{label:"æ ‡ç­¾","min-width":"200"},{default:(0,i.k6)(function(e){return[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(e.row.labels,function(e,t){return(0,i.uX)(),(0,i.Wv)(L,{key:t,size:"small",style:{"margin-right":"5px"}},{default:(0,i.k6)(function(){return[(0,i.eW)((0,p.v_)(t)+": "+(0,p.v_)(e),1)]}),_:2},1024)}),128))]}),_:1})]}),_:2},1032,["data"])):(0,i.Q3)("",!0)])):((0,i.uX)(),(0,i.Wv)(b,{key:1,description:"æš‚æ— æ•°æ®","image-size":80}))]}),_:2},1024)}),128))])):(0,i.Q3)("",!0)])}var G=r(54119),H=r(78676),Y=(r(2008),r(51629),r(23418),r(74423),r(64346),r(48598),r(62062),r(60739),r(23288),r(18111),r(22489),r(7588),r(61701),r(33110),r(9868),r(5506),r(16034),r(31415),r(17642),r(58004),r(33853),r(45876),r(32475),r(15024),r(31698),r(21699),r(47764),r(42762),r(58335),r(23500),r(62953),r(59041));const Z={name:"MetricsView",data:function(){var e=["data_acquisition_collection_latency_ms","data_acquisition_collection_rate","data_acquisition_queue_depth","data_acquisition_errors_total"],t=["data_acquisition_processing_latency_ms","data_acquisition_write_latency_ms","data_acquisition_batch_write_efficiency","data_acquisition_connection_status_changes_total","data_acquisition_connection_duration_seconds"],r=[],n=localStorage.getItem("metrics-selected");if(n)try{var a=JSON.parse(n);Array.isArray(a)&&(r=a.filter(function(t){return!e.includes(t)}))}catch(i){}return{loading:!1,error:"",metrics:null,lastUpdate:"",coreMetrics:e,importantMetrics:t,selectedMetrics:r,searchKeyword:"",availableMetrics:[].concat(t),chartInstances:{}}},mounted:function(){this.loadMetrics(),window.addEventListener("resize",this.resizeCharts)},beforeUnmount:function(){window.removeEventListener("resize",this.resizeCharts),Object.values(this.chartInstances).forEach(function(e){var t;return null===e||void 0===e||null===(t=e.dispose)||void 0===t?void 0:t.call(e)})},watch:{selectedMetrics:{deep:!0,handler:function(e){var t=this;localStorage.setItem("metrics-selected",JSON.stringify(e||[])),this.$nextTick(function(){return t.renderCharts()})}},searchKeyword:function(){var e=this;this.$nextTick(function(){return e.renderCharts()})}},computed:{filteredMetrics:function(){var e=this,t={};if(!this.metrics)return t;var r=this.selectedMetrics&&this.selectedMetrics.length>0?this.selectedMetrics:this.availableMetrics;if(this.searchKeyword&&this.searchKeyword.trim()){var n=this.searchKeyword.toLowerCase();r=r.filter(function(t){var r=e.getMetricTitle(t).toLowerCase();return r.includes(n)||t.toLowerCase().includes(n)})}return r.forEach(function(r){e.metrics[r]?t[r]=e.metrics[r]:t[r]={type:"",help:"æš‚æ— æ•°æ®",data:[]}}),0===Object.keys(t).length&&this.metrics&&Object.keys(this.metrics).forEach(function(r){e.coreMetrics.includes(r)||(t[r]=e.metrics[r])}),t}},methods:{loadMetrics:function(){var e=this;return(0,C.A)((0,w.A)().m(function t(){var r,n,i;return(0,w.A)().w(function(t){while(1)switch(t.p=t.n){case 0:return e.loading=!0,e.error="",t.p=1,t.n=2,A("/api/metrics-data");case 2:r=t.v,e.metrics=r.metrics||{},n=Object.keys(e.metrics||{}),e.availableMetrics=Array.from(new Set([].concat((0,a.A)(e.importantMetrics),(0,a.A)(n.filter(function(t){return!e.coreMetrics.includes(t)}))))),e.lastUpdate=new Date(r.timestamp).toLocaleString("zh-CN"),e.$nextTick(function(){return e.renderCharts()}),t.n=4;break;case 3:t.p=3,i=t.v,e.error=(null===i||void 0===i?void 0:i.message)||String(i),e.metrics=null;case 4:return t.p=4,e.loading=!1,t.f(4);case 5:return t.a(2)}},t,null,[[1,3,4,5]])}))()},renderCharts:function(){var e=this;this.metrics&&Object.keys(this.filteredMetrics).forEach(function(t){var r=e.filteredMetrics[t];if(null!==r&&void 0!==r&&r.data&&!(r.data.length<2)){var n="chart-"+t,a=document.getElementById(n);if(a){e.chartInstances[t]&&e.chartInstances[t].dispose();var i=Y.Ts(a),l=r.data.map(function(e){return e.value}),s=r.data.map(function(e,t){return"#".concat(t+1)});i.setOption({tooltip:{trigger:"axis",formatter:function(n){var a=r.data[n[0].dataIndex],i=e.formatMetricValue(t,n[0].value);return null!==a&&void 0!==a&&a.labels&&(i+="<br/>"+Object.entries(a.labels).map(function(e){var t=(0,H.A)(e,2),r=t[0],n=t[1];return"".concat(r,": ").concat(n)}).join("<br/>")),i}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",data:s,boundaryGap:!1},yAxis:{type:"value",name:e.getMetricUnit(t)},series:[{name:e.getMetricTitle(t),type:"line",smooth:!0,data:l,areaStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:"rgba(64, 158, 255, 0.30)"},{offset:1,color:"rgba(64, 158, 255, 0.10)"}]}},lineStyle:{color:"#409eff",width:2},symbol:"circle",symbolSize:6}]}),e.chartInstances[t]=i}}})},resizeCharts:function(){Object.values(this.chartInstances).forEach(function(e){var t;return null===e||void 0===e||null===(t=e.resize)||void 0===t?void 0:t.call(e)})},searchMetrics:function(){var e=this;this.$nextTick(function(){return e.renderCharts()})},clearFilters:function(){var e=this;this.selectedMetrics=[],this.searchKeyword="",localStorage.removeItem("metrics-selected"),this.$nextTick(function(){return e.renderCharts()})},getMetricTitle:function(e){var t={data_acquisition_collection_latency_ms:"é‡‡é›†å»¶è¿Ÿ",data_acquisition_collection_rate:"é‡‡é›†é¢‘ç‡",data_acquisition_queue_depth:"é˜Ÿåˆ—æ·±åº¦ï¼ˆæ€»ï¼‰",data_acquisition_processing_latency_ms:"å¤„ç†å»¶è¿Ÿ",data_acquisition_write_latency_ms:"å†™å…¥å»¶è¿Ÿ",data_acquisition_batch_write_efficiency:"æ‰¹é‡å†™å…¥æ•ˆç‡",data_acquisition_errors_total:"é”™è¯¯æ€»æ•°",data_acquisition_connection_status_changes_total:"è¿æ¥çŠ¶æ€å˜åŒ–",data_acquisition_connection_duration_seconds:"è¿æ¥æŒç»­æ—¶é—´"};return t[e]||e},getMetricUnit:function(e){return e.includes("latency_ms")||e.includes("_ms")?"æ¯«ç§’":e.includes("_rate")?"points/s":e.includes("_seconds")?"ç§’":e.includes("_total")?"æ¬¡":e.includes("_depth")?"æ¶ˆæ¯æ•°":""},formatMetricValue:function(e,t){if(t&&"object"===(0,G.A)(t)&&"value"in t&&(t=t.value),"number"!==typeof t)return t;var r=this.getMetricUnit(e),n=t.toFixed(2);return"æ¯«ç§’"===r?n+" ms":"points/s"===r?n+" points/s":"ç§’"===r?n+" s":"æ¶ˆæ¯æ•°"===r?n+" messages":"æ¬¡"===r?n+" æ¬¡":e.includes("efficiency")?n+" points/ms":n},getLatestValue:function(e){return e&&0!==e.length?e[e.length-1]:{value:0}},getMetricValue:function(e){var t,r=null===(t=this.metrics)||void 0===t?void 0:t[e];if(!r||!r.data||0===r.data.length)return 0;var n=this.getLatestValue(r.data).value;return"number"===typeof n?n:0},getMetricType:function(e){var t={histogram:"success",counter:"warning",gauge:"info"};return t[e]||""}}},ee=(0,c.A)(Z,[["render",R],["__scopeId","data-v-93a9a914"]]),te=ee;var re={class:"page"},ne={class:"header"},ae=["disabled"],ie={class:"filters"},le={class:"f"},se=["value"],oe={class:"f"},ce={class:"f"},ue=["disabled"],de={key:0,class:"error"},ve={key:1,class:"meta"},fe={key:2,class:"table"},pe={class:"msg"},he={class:"m"},ge={key:0},ke={class:"pre"},me={key:3,class:"empty"},_e={key:4,class:"pager"},be=["disabled"],ye=["disabled"];function Le(e,t,r,l,s,o){return(0,i.uX)(),(0,i.CE)("div",re,[(0,i.Lk)("header",ne,[t[7]||(t[7]=(0,i.Lk)("h1",null,"é‡‡é›†æ—¥å¿—ï¼ˆEdge Agentï¼‰",-1)),(0,i.Lk)("button",{onClick:t[0]||(t[0]=function(){return o.load&&o.load.apply(o,arguments)}),disabled:s.loading},(0,p.v_)(s.loading?"åˆ·æ–°ä¸­...":"åˆ·æ–°"),9,ae)]),t[20]||(t[20]=(0,i.Lk)("p",{class:"hint"},[(0,i.eW)(" æ•°æ®æºï¼š"),(0,i.Lk)("code",null,"/edge/api/logs"),(0,i.eW)("ï¼ˆé€šè¿‡ devServer ä»£ç†åˆ° "),(0,i.Lk)("code",null,"http://localhost:8001/api/logs"),(0,i.eW)("ï¼‰ã€‚ ")],-1)),(0,i.Lk)("section",ie,[(0,i.Lk)("label",le,[t[9]||(t[9]=(0,i.Lk)("span",null,"level",-1)),(0,i.bo)((0,i.Lk)("select",{"onUpdate:modelValue":t[1]||(t[1]=function(e){return s.level=e})},[t[8]||(t[8]=(0,i.Lk)("option",{value:""},"(all)",-1)),((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(s.levels,function(e){return(0,i.uX)(),(0,i.CE)("option",{key:e,value:e},(0,p.v_)(e),9,se)}),128))],512),[[n.u1,s.level]])]),(0,i.Lk)("label",oe,[t[10]||(t[10]=(0,i.Lk)("span",null,"keyword",-1)),(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t[2]||(t[2]=function(e){return s.keyword=e}),placeholder:"æ¨¡ç³Šæœç´¢ï¼ˆmessage/source/exceptionï¼‰"},null,512),[[n.Jo,s.keyword]])]),(0,i.Lk)("label",ce,[t[12]||(t[12]=(0,i.Lk)("span",null,"pageSize",-1)),(0,i.bo)((0,i.Lk)("select",{"onUpdate:modelValue":t[3]||(t[3]=function(e){return s.pageSize=e})},(0,a.A)(t[11]||(t[11]=[(0,i.Lk)("option",{value:50},"50",-1),(0,i.Lk)("option",{value:100},"100",-1),(0,i.Lk)("option",{value:200},"200",-1)])),512),[[n.u1,s.pageSize,void 0,{number:!0}]])]),(0,i.Lk)("button",{onClick:t[4]||(t[4]=function(e){s.page=1,o.load()}),disabled:s.loading},"æŸ¥è¯¢",8,ue)]),s.error?((0,i.uX)(),(0,i.CE)("p",de,(0,p.v_)(s.error),1)):(0,i.Q3)("",!0),s.resp?((0,i.uX)(),(0,i.CE)("div",ve,[(0,i.Lk)("div",null,[t[13]||(t[13]=(0,i.Lk)("b",null,"Total",-1)),t[14]||(t[14]=(0,i.eW)(": ",-1)),(0,i.Lk)("code",null,(0,p.v_)(s.resp.Total),1)]),(0,i.Lk)("div",null,[t[15]||(t[15]=(0,i.Lk)("b",null,"Page",-1)),t[16]||(t[16]=(0,i.eW)(": ",-1)),(0,i.Lk)("code",null,(0,p.v_)(s.resp.Page),1),t[17]||(t[17]=(0,i.eW)("/",-1)),(0,i.Lk)("code",null,(0,p.v_)(s.resp.TotalPages),1)])])):(0,i.Q3)("",!0),o.rows.length?((0,i.uX)(),(0,i.CE)("table",fe,[t[19]||(t[19]=(0,i.Lk)("thead",null,[(0,i.Lk)("tr",null,[(0,i.Lk)("th",null,"time"),(0,i.Lk)("th",null,"level"),(0,i.Lk)("th",null,"source"),(0,i.Lk)("th",{style:{width:"55%"}},"message")])],-1)),(0,i.Lk)("tbody",null,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(o.rows,function(e,r){return(0,i.uX)(),(0,i.CE)("tr",{key:r},[(0,i.Lk)("td",null,[(0,i.Lk)("code",null,(0,p.v_)(e.timestamp||e.time||e.createdAt||"-"),1)]),(0,i.Lk)("td",null,[(0,i.Lk)("code",null,(0,p.v_)(e.level||"-"),1)]),(0,i.Lk)("td",null,[(0,i.Lk)("code",null,(0,p.v_)(e.sourceContext||e.source||"-"),1)]),(0,i.Lk)("td",pe,[(0,i.Lk)("div",he,(0,p.v_)(e.message||e.renderedMessage||"-"),1),e.exception?((0,i.uX)(),(0,i.CE)("details",ge,[t[18]||(t[18]=(0,i.Lk)("summary",null,"exception",-1)),(0,i.Lk)("pre",ke,(0,p.v_)(e.exception),1)])):(0,i.Q3)("",!0)])])}),128))])])):s.loading||s.error?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("p",me,"æš‚æ— æ—¥å¿—ï¼ˆç¡®è®¤ Edge Agent å·²å¯åŠ¨å¹¶äº§ç”Ÿæ—¥å¿—ï¼‰ã€‚")),s.resp?((0,i.uX)(),(0,i.CE)("div",_e,[(0,i.Lk)("button",{onClick:t[5]||(t[5]=function(){return o.prev&&o.prev.apply(o,arguments)}),disabled:s.loading||s.page<=1},"ä¸Šä¸€é¡µ",8,be),(0,i.Lk)("button",{onClick:t[6]||(t[6]=function(){return o.next&&o.next.apply(o,arguments)}),disabled:s.loading||s.page>=(s.resp.TotalPages||1)},"ä¸‹ä¸€é¡µ",8,ye)])):(0,i.Q3)("",!0)])}r(38781),r(48408),r(14603),r(47566),r(98721);const we={name:"LogsView",data:function(){return{loading:!1,error:"",levels:[],level:"",keyword:"",page:1,pageSize:100,resp:null}},computed:{rows:function(){var e;return(null===(e=this.resp)||void 0===e?void 0:e.Data)||[]}},mounted:function(){var e=this;return(0,C.A)((0,w.A)().m(function t(){return(0,w.A)().w(function(t){while(1)switch(t.n){case 0:return t.n=1,e.loadLevels();case 1:return t.n=2,e.load();case 2:return t.a(2)}},t)}))()},methods:{loadLevels:function(){var e=this;return(0,C.A)((0,w.A)().m(function t(){var r;return(0,w.A)().w(function(t){while(1)switch(t.p=t.n){case 0:return t.p=0,t.n=1,A("/edge/api/logs/levels");case 1:r=t.v,e.levels=Array.isArray(r)?r:[],t.n=3;break;case 2:t.p=2,t.v,e.levels=[];case 3:return t.a(2)}},t,null,[[0,2]])}))()},load:function(){var e=this;return(0,C.A)((0,w.A)().m(function t(){var r,n;return(0,w.A)().w(function(t){while(1)switch(t.p=t.n){case 0:return e.loading=!0,e.error="",t.p=1,r=new URLSearchParams,e.level&&r.set("level",e.level),e.keyword&&r.set("keyword",e.keyword),r.set("page",String(e.page)),r.set("pageSize",String(e.pageSize)),t.n=2,A("/edge/api/logs?".concat(r.toString()));case 2:e.resp=t.v,t.n=4;break;case 3:t.p=3,n=t.v,e.error=(null===n||void 0===n?void 0:n.message)||String(n),e.resp=null;case 4:return t.p=4,e.loading=!1,t.f(4);case 5:return t.a(2)}},t,null,[[1,3,4,5]])}))()},prev:function(){var e=this;return(0,C.A)((0,w.A)().m(function t(){return(0,w.A)().w(function(t){while(1)switch(t.n){case 0:if(!(e.page<=1)){t.n=1;break}return t.a(2);case 1:return e.page-=1,t.n=2,e.load();case 2:return t.a(2)}},t)}))()},next:function(){var e=this;return(0,C.A)((0,w.A)().m(function t(){var r,n;return(0,w.A)().w(function(t){while(1)switch(t.n){case 0:if(n=(null===(r=e.resp)||void 0===r?void 0:r.TotalPages)||1,!(e.page>=n)){t.n=1;break}return t.a(2);case 1:return e.page+=1,t.n=2,e.load();case 2:return t.a(2)}},t)}))()}}},Ce=(0,c.A)(we,[["render",Le],["__scopeId","data-v-f9c97964"]]),Ae=Ce;var Me=[{path:"/",redirect:"/edges"},{path:"/edges",name:"edges",component:x},{path:"/metrics",name:"metrics",component:te},{path:"/logs",name:"logs",component:Ae}];const Ee=(0,f.aE)({history:(0,f.LA)(),routes:Me});var Xe=r(2617);r(4188);(0,n.Ef)(v).use(Ee).use(Xe.A).mount("#app")}},t={};function r(n){var a=t[n];if(void 0!==a)return a.exports;var i=t[n]={exports:{}};return e[n].call(i.exports,i,i.exports,r),i.exports}r.m=e,(()=>{var e=[];r.O=(t,n,a,i)=>{if(!n){var l=1/0;for(u=0;u<e.length;u++){for(var[n,a,i]=e[u],s=!0,o=0;o<n.length;o++)(!1&i||l>=i)&&Object.keys(r.O).every(e=>r.O[e](n[o]))?n.splice(o--,1):(s=!1,i<l&&(l=i));if(s){e.splice(u--,1);var c=a();void 0!==c&&(t=c)}}return t}i=i||0;for(var u=e.length;u>0&&e[u-1][2]>i;u--)e[u]=e[u-1];e[u]=[n,a,i]}})(),(()=>{r.n=e=>{var t=e&&e.__esModule?()=>e["default"]:()=>e;return r.d(t,{a:t}),t}})(),(()=>{r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}})(),(()=>{r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()})(),(()=>{r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t)})(),(()=>{r.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}})(),(()=>{var e={524:0};r.O.j=t=>0===e[t];var t=(t,n)=>{var a,i,[l,s,o]=n,c=0;if(l.some(t=>0!==e[t])){for(a in s)r.o(s,a)&&(r.m[a]=s[a]);if(o)var u=o(r)}for(t&&t(n);c<l.length;c++)i=l[c],r.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return r.O(u)},n=self["webpackChunkdataacquisition_frontend"]=self["webpackChunkdataacquisition_frontend"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var n=r.O(void 0,[504],()=>r(68680));n=r.O(n)})();
//# sourceMappingURL=app.b085ac5a.js.map