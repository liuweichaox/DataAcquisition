(()=>{"use strict";var e={9080(e,r,n){n(3792),n(3362),n(9085),n(9391);var t=n(5130),a=n(9258),o=n(6768),l={class:"nav"},s={class:"main"};function u(e,r){var n=(0,o.g2)("router-link"),t=(0,o.g2)("router-view");return(0,o.uX)(),(0,o.CE)("div",null,[(0,o.Lk)("nav",l,[(0,o.bF)(n,{to:"/edges"},{default:(0,o.k6)(function(){return(0,a.A)(r[0]||(r[0]=[(0,o.eW)("Edges",-1)]))}),_:1}),r[1]||(r[1]=(0,o.Lk)("a",{href:"/metrics",target:"_blank",rel:"noreferrer"},"Central metrics",-1))]),(0,o.Lk)("main",s,[(0,o.bF)(t)])])}var i=n(1241);const c={},d=(0,i.A)(c,[["render",u],["__scopeId","data-v-4391b810"]]),v=d;var f=n(8728),h=n(4232),p={class:"page"},k={class:"header"},g=["disabled"],b={key:0,class:"error"},L={key:1,class:"table"},_={class:"errcell"},m={key:2,class:"empty"};function w(e,r,n,t,a,l){return(0,o.uX)(),(0,o.CE)("div",p,[(0,o.Lk)("header",k,[r[1]||(r[1]=(0,o.Lk)("h1",null,"边缘节点（edge_id）",-1)),(0,o.Lk)("button",{onClick:r[0]||(r[0]=function(){return l.load&&l.load.apply(l,arguments)}),disabled:a.loading},(0,h.v_)(a.loading?"刷新中...":"刷新"),9,g)]),r[3]||(r[3]=(0,o.Lk)("p",{class:"hint"},[(0,o.eW)(" 后端："),(0,o.Lk)("code",null,"DataAcquisition.Central.Web"),(0,o.eW)("（默认 "),(0,o.Lk)("code",null,"http://localhost:8000"),(0,o.eW)("）； 前端 devServer 通过代理访问 "),(0,o.Lk)("code",null,"/api"),(0,o.eW)("。 ")],-1)),a.error?((0,o.uX)(),(0,o.CE)("p",b,(0,h.v_)(a.error),1)):(0,o.Q3)("",!0),a.edges.length?((0,o.uX)(),(0,o.CE)("table",L,[r[2]||(r[2]=(0,o.Lk)("thead",null,[(0,o.Lk)("tr",null,[(0,o.Lk)("th",null,"edge_id"),(0,o.Lk)("th",null,"hostname"),(0,o.Lk)("th",null,"version"),(0,o.Lk)("th",null,"last_seen_utc"),(0,o.Lk)("th",null,"buffer_backlog"),(0,o.Lk)("th",null,"last_error")])],-1)),(0,o.Lk)("tbody",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(a.edges,function(e){var r;return(0,o.uX)(),(0,o.CE)("tr",{key:e.edgeId},[(0,o.Lk)("td",null,[(0,o.Lk)("code",null,(0,h.v_)(e.edgeId),1)]),(0,o.Lk)("td",null,(0,h.v_)(e.hostname||"-"),1),(0,o.Lk)("td",null,(0,h.v_)(e.version||"-"),1),(0,o.Lk)("td",null,(0,h.v_)(e.lastSeenUtc),1),(0,o.Lk)("td",null,(0,h.v_)(null!==(r=e.bufferBacklog)&&void 0!==r?r:"-"),1),(0,o.Lk)("td",_,(0,h.v_)(e.lastError||"-"),1)])}),128))])])):a.loading||a.error?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("p",m,"暂无边缘节点（先调用 /api/edges/register 或 /api/edges/heartbeat）。"))])}var y=n(908),E=n(388);n(6280),n(6918),n(8706),n(6099);function A(e){return C.apply(this,arguments)}function C(){return C=(0,E.A)((0,y.A)().m(function e(r){var n,t;return(0,y.A)().w(function(e){while(1)switch(e.n){case 0:return e.n=1,fetch(r,{headers:{Accept:"application/json"}});case 1:if(n=e.v,n.ok){e.n=3;break}return e.n=2,n.text()["catch"](function(){return""});case 2:throw t=e.v,new Error("HTTP ".concat(n.status," ").concat(n.statusText).concat(t?": ".concat(t):""));case 3:return e.n=4,n.json();case 4:return e.a(2,e.v)}},e)})),C.apply(this,arguments)}const O={name:"EdgesView",data:function(){return{edges:[],loading:!1,error:""}},mounted:function(){this.load()},methods:{load:function(){var e=this;return(0,E.A)((0,y.A)().m(function r(){var n;return(0,y.A)().w(function(r){while(1)switch(r.p=r.n){case 0:return e.loading=!0,e.error="",r.p=1,r.n=2,A("/api/edges");case 2:e.edges=r.v,r.n=4;break;case 3:r.p=3,n=r.v,e.error=(null===n||void 0===n?void 0:n.message)||String(n);case 4:return r.p=4,e.loading=!1,r.f(4);case 5:return r.a(2)}},r,null,[[1,3,4,5]])}))()}}},j=(0,i.A)(O,[["render",w],["__scopeId","data-v-b58a2c44"]]),x=j;var X=[{path:"/",redirect:"/edges"},{path:"/edges",name:"edges",component:x}];const W=(0,f.aE)({history:(0,f.LA)(),routes:X});(0,t.Ef)(v).use(W).mount("#app")}},r={};function n(t){var a=r[t];if(void 0!==a)return a.exports;var o=r[t]={exports:{}};return e[t].call(o.exports,o,o.exports,n),o.exports}n.m=e,(()=>{var e=[];n.O=(r,t,a,o)=>{if(!t){var l=1/0;for(c=0;c<e.length;c++){for(var[t,a,o]=e[c],s=!0,u=0;u<t.length;u++)(!1&o||l>=o)&&Object.keys(n.O).every(e=>n.O[e](t[u]))?t.splice(u--,1):(s=!1,o<l&&(l=o));if(s){e.splice(c--,1);var i=a();void 0!==i&&(r=i)}}return r}o=o||0;for(var c=e.length;c>0&&e[c-1][2]>o;c--)e[c]=e[c-1];e[c]=[t,a,o]}})(),(()=>{n.n=e=>{var r=e&&e.__esModule?()=>e["default"]:()=>e;return n.d(r,{a:r}),r}})(),(()=>{n.d=(e,r)=>{for(var t in r)n.o(r,t)&&!n.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:r[t]})}})(),(()=>{n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()})(),(()=>{n.o=(e,r)=>Object.prototype.hasOwnProperty.call(e,r)})(),(()=>{var e={524:0};n.O.j=r=>0===e[r];var r=(r,t)=>{var a,o,[l,s,u]=t,i=0;if(l.some(r=>0!==e[r])){for(a in s)n.o(s,a)&&(n.m[a]=s[a]);if(u)var c=u(n)}for(r&&r(t);i<l.length;i++)o=l[i],n.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return n.O(c)},t=self["webpackChunkdataacquisition_frontend"]=self["webpackChunkdataacquisition_frontend"]||[];t.forEach(r.bind(null,0)),t.push=r.bind(null,t.push.bind(t))})();var t=n.O(void 0,[504],()=>n(9080));t=n.O(t)})();
//# sourceMappingURL=app.8774adcc.js.map