# ğŸ›°ï¸ DataAcquisition - å·¥ä¸šçº§ PLC æ•°æ®é‡‡é›†ç³»ç»Ÿ

[![.NET](https://img.shields.io/badge/.NET-10.0%20%7C%208.0-512BD4?logo=dotnet)](https://dotnet.microsoft.com/)
[![License: MIT](https://img.shields.io/badge/License-MIT-blue.svg)](LICENSE)
[![Platform](https://img.shields.io/badge/Platform-Windows%20%7C%20Linux%20%7C%20macOS-lightgrey)](https://dotnet.microsoft.com/)
[![Build Status](https://img.shields.io/badge/build-passing-brightgreen)]()
[![Version](https://img.shields.io/badge/version-1.0.0-blue)]()
[![PRs Welcome](https://img.shields.io/badge/PRs-welcome-brightgreen.svg)]()

English: [README.en.md](README.en.md)

## ğŸ“‹ ç›®å½•

- [ğŸ“– é¡¹ç›®ç®€ä»‹](#-é¡¹ç›®ç®€ä»‹)
- [ğŸ¯ æ ¸å¿ƒç‰¹æ€§](#-æ ¸å¿ƒç‰¹æ€§)
- [ğŸ—ï¸ ç³»ç»Ÿæ¶æ„](#-ç³»ç»Ÿæ¶æ„)
- [ğŸ“ é¡¹ç›®ç»“æ„](#-é¡¹ç›®ç»“æ„)
- [ğŸš€ å¿«é€Ÿå¼€å§‹](#-å¿«é€Ÿå¼€å§‹)
- [ğŸ“š æ–‡æ¡£å¯¼èˆª](#-æ–‡æ¡£å¯¼èˆª)
- [ğŸ¤ è´¡çŒ®æŒ‡å—](#-è´¡çŒ®æŒ‡å—)
- [ğŸ“„ å¼€æºåè®®](#-å¼€æºåè®®)
- [ğŸ™ è‡´è°¢](#-è‡´è°¢)

## ğŸ“– é¡¹ç›®ç®€ä»‹

DataAcquisition æ˜¯ä¸€ä¸ªåŸºäº .NET æ„å»ºçš„å·¥ä¸šçº§ PLC æ•°æ®é‡‡é›†ç³»ç»Ÿã€‚ç³»ç»Ÿé‡‡ç”¨ **WAL-firstï¼ˆå†™å‰æ—¥å¿—ï¼‰æ¶æ„**ç¡®ä¿æ•°æ®é›¶ä¸¢å¤±ï¼Œæ”¯æŒ **Edge-Central åˆ†å¸ƒå¼æ¶æ„**å®ç°å¤šè½¦é—´é›†ä¸­ç®¡ç†ã€‚æä¾›å¤š PLC å¹¶è¡Œé‡‡é›†ã€æ¡ä»¶è§¦å‘é‡‡é›†ã€æ‰¹é‡è¯»å–ä¼˜åŒ–ç­‰é«˜çº§åŠŸèƒ½ï¼Œæ”¯æŒé…ç½®çƒ­æ›´æ–°å’Œå®æ—¶ç›‘æ§ï¼Œå¼€ç®±å³ç”¨ï¼Œè¿ç»´å‹å¥½ã€‚

**æŠ€æœ¯æ ˆï¼š**
- è¿è¡Œæ—¶ï¼š.NET 10.0 / .NET 8.0ï¼ˆLTS ç‰ˆæœ¬ï¼‰
- æ•°æ®å­˜å‚¨ï¼šInfluxDB 2.xï¼ˆæ—¶åºæ•°æ®åº“ï¼‰+ Parquetï¼ˆæœ¬åœ° WALï¼‰
- ç›‘æ§ï¼šPrometheus æŒ‡æ ‡ + Vue3 å¯è§†åŒ–ç•Œé¢
- æ¶æ„ï¼šEdge-Central åˆ†å¸ƒå¼æ¶æ„

### ğŸ¯ æ ¸å¿ƒç‰¹æ€§

| ç‰¹æ€§ | è¯´æ˜ |
|------|------|
| ğŸ”’ **æ•°æ®å®‰å…¨** | WAL-first æ¶æ„ï¼Œæ‰€æœ‰æ•°æ®å…ˆå†™å…¥æœ¬åœ° Parquet æ–‡ä»¶ï¼Œç¡®ä¿é›¶ä¸¢å¤± |
| ğŸ”€ **å¤šåè®®æ”¯æŒ** | æ”¯æŒ Mitsubishiï¼ˆä¸‰è±ï¼‰ã€Inovanceï¼ˆæ±‡å·ï¼‰ã€BeckhoffAdsï¼ˆå€ç¦ï¼‰ç­‰ PLC åè®® |
| âš¡ **é«˜æ€§èƒ½é‡‡é›†** | å¤š PLC å¹¶è¡Œé‡‡é›†ï¼Œæ‰¹é‡è¯»å–ä¼˜åŒ–ï¼Œå‡å°‘ç½‘ç»œå¾€è¿” |
| ğŸ¯ **æ™ºèƒ½é‡‡é›†** | æ”¯æŒæ¡ä»¶è§¦å‘é‡‡é›†ï¼ˆè¾¹æ²¿è§¦å‘ã€å€¼å˜åŒ–è§¦å‘ï¼‰å’ŒæŒç»­é‡‡é›†ä¸¤ç§æ¨¡å¼ |
| ğŸ”„ **é…ç½®çƒ­æ›´æ–°** | JSON é…ç½®æ–‡ä»¶ + æ–‡ä»¶ç³»ç»Ÿç›‘æ§ï¼Œä¿®æ”¹é…ç½®æ— éœ€é‡å¯æœåŠ¡ |
| ğŸ“Š **å®æ—¶ç›‘æ§** | Prometheus æŒ‡æ ‡æš´éœ²ï¼ŒVue3 å¯è§†åŒ–ç•Œé¢ï¼Œå®æ—¶å±•ç¤ºç³»ç»ŸçŠ¶æ€ |
| ğŸ’¾ **åŒå­˜å‚¨ç­–ç•¥** | InfluxDB æ—¶åºæ•°æ®åº“ + Parquet æœ¬åœ°æŒä¹…åŒ–ï¼ˆWALï¼‰ |
| ğŸ” **è‡ªåŠ¨å®¹é”™** | ç½‘ç»œå¼‚å¸¸è‡ªåŠ¨é‡è¿ï¼Œæ•°æ®å†™å…¥å¤±è´¥è‡ªåŠ¨é‡è¯•ï¼Œä¿è¯æ•°æ®å®Œæ•´æ€§ |

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

### åˆ†å¸ƒå¼æ¶æ„æ¦‚è§ˆ

ç³»ç»Ÿé‡‡ç”¨ **Edge-Centralï¼ˆè¾¹ç¼˜-ä¸­å¿ƒï¼‰åˆ†å¸ƒå¼æ¶æ„**ï¼Œæ”¯æŒå¤šè½¦é—´ã€å¤šèŠ‚ç‚¹çš„é›†ä¸­å¼ç®¡ç†å’Œç›‘æ§ï¼š

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚           Central Web (Vue3)            â”‚
                    â”‚            å¯è§†åŒ–ç•Œé¢ / ç›‘æ§é¢æ¿           â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                        â”‚ HTTP/API
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚         Central API                     â”‚
                    â”‚  â€¢ è¾¹ç¼˜èŠ‚ç‚¹æ³¨å†Œ/å¿ƒè·³ç®¡ç†                   â”‚
                    â”‚  â€¢ é¥æµ‹æ•°æ®æ¥å…¥                           â”‚
                    â”‚  â€¢ æŸ¥è¯¢ä¸ç®¡ç†æ¥å£                         â”‚
                    â”‚  â€¢ Prometheus æŒ‡æ ‡èšåˆ                   â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚                     â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚                                               â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   Edge Agent #1   â”‚                          â”‚   Edge Agent #N   â”‚
    â”‚      (Node 1)     â”‚                          â”‚      (Node N)     â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚                                              â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Edge Agent å†…éƒ¨æ¶æ„

æ¯ä¸ª Edge Agent é‡‡ç”¨åˆ†å±‚æ¶æ„è®¾è®¡ï¼Œå„å±‚èŒè´£æ¸…æ™°ï¼Œç¡®ä¿æ•°æ®é›¶ä¸¢å¤±ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        PLC Device          â”‚â”€â”€â”€â”€â”€â”€â–¶ â”‚  Heartbeat Monitor Layer â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Data Acquisition Layer   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    Queue Service Layer     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          Storage Layer     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      WAL Persistence       â”‚â”€â”€â”€â”€â”€â”€â–¶ â”‚ Time-Series Database Storage â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚                                 â”‚
                 â–¼                                 â”‚  Write Failed
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”‚
â”‚      Retry Worker          â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ ¸å¿ƒæ•°æ®æµ

#### Edge Agent å†…éƒ¨æµç¨‹

1. **æ•°æ®é‡‡é›†é˜¶æ®µ**ï¼šPLC è®¾å¤‡ â†’ `ChannelCollector`ï¼ˆæ”¯æŒæ¡ä»¶è§¦å‘ã€æ‰¹é‡è¯»å–ä¼˜åŒ–ï¼‰
2. **æ•°æ®èšåˆé˜¶æ®µ**ï¼š`LocalQueueService` æŒ‰é…ç½®çš„ `BatchSize` æ‰¹é‡èšåˆæ•°æ®
3. **æ•°æ®æŒä¹…åŒ–é˜¶æ®µ**ï¼š
   - **Parquet WAL**ï¼šç«‹å³å†™å…¥æœ¬åœ° Parquet æ–‡ä»¶ï¼ˆå†™å‰æ—¥å¿—ï¼Œç¡®ä¿é›¶ä¸¢å¤±ï¼‰
   - **InfluxDB**ï¼šåŒæ­¥å†™å…¥æ—¶åºæ•°æ®åº“ï¼ˆä¸»å­˜å‚¨ï¼‰
4. **å®¹é”™å¤„ç†é˜¶æ®µ**ï¼šå†™å…¥æˆåŠŸååˆ é™¤ WAL æ–‡ä»¶ï¼›å†™å…¥å¤±è´¥æ—¶ä¿ç•™ WAL æ–‡ä»¶ï¼Œç”± `RetryWorker` å®šæœŸé‡è¯•
5. **æ•°æ®ä¸ŠæŠ¥é˜¶æ®µ**ï¼šå¯é€‰åœ°å°†æ•°æ®ä¸ŠæŠ¥åˆ° Central APIï¼ˆç”¨äºé›†ä¸­å¼ç®¡ç†å’Œç›‘æ§ï¼‰

#### Edge-Central äº¤äº’æµç¨‹

1. **èŠ‚ç‚¹æ³¨å†Œé˜¶æ®µ**ï¼šEdge Agent å¯åŠ¨æ—¶è‡ªåŠ¨å‘ Central API æ³¨å†ŒèŠ‚ç‚¹ä¿¡æ¯ï¼ˆEdgeIdã€AgentBaseUrlã€Hostnameï¼‰
2. **å¿ƒè·³ä¸ŠæŠ¥é˜¶æ®µ**ï¼šå‘¨æœŸæ€§å‘é€å¿ƒè·³ä¿¡æ¯ï¼ˆé»˜è®¤é—´éš” 10 ç§’ï¼‰ï¼ŒåŒ…å«é˜Ÿåˆ—ç§¯å‹é‡ã€é”™è¯¯ä¿¡æ¯ç­‰çŠ¶æ€
3. **é¥æµ‹æ•°æ®ä¸ŠæŠ¥é˜¶æ®µ**ï¼šæ‰¹é‡ä¸ŠæŠ¥é‡‡é›†çš„æ—¶åºæ•°æ®åˆ° Central APIï¼ˆå¯é€‰åŠŸèƒ½ï¼‰
4. **ç›‘æ§æŸ¥è¯¢é˜¶æ®µ**ï¼šCentral Web å‰ç«¯é€šè¿‡ Central API æŸ¥è¯¢å„è¾¹ç¼˜èŠ‚ç‚¹çš„çŠ¶æ€ã€æŒ‡æ ‡å’Œæ—¥å¿—

## ğŸ“ é¡¹ç›®ç»“æ„

```
DataAcquisition/
â”œâ”€â”€ src/DataAcquisition.Application/     # åº”ç”¨å±‚ - æ¥å£å®šä¹‰
â”‚   â”œâ”€â”€ Abstractions/               # æ ¸å¿ƒæ¥å£æŠ½è±¡
â”‚   â””â”€â”€ PLCRuntime.cs              # PLC è¿è¡Œæ—¶æšä¸¾
â”œâ”€â”€ src/DataAcquisition.Contracts/       # å¥‘çº¦å±‚ - å¯¹å¤– DTO/åè®®æ¨¡å‹
â”œâ”€â”€ src/DataAcquisition.Domain/         # é¢†åŸŸå±‚ - æ ¸å¿ƒæ¨¡å‹
â”‚   â”œâ”€â”€ Models/                     # æ•°æ®æ¨¡å‹
â”‚   â””â”€â”€ OperationalEvents/          # æ“ä½œäº‹ä»¶
â”œâ”€â”€ src/DataAcquisition.Infrastructure/ # åŸºç¡€è®¾æ–½å±‚ - å®ç°
â”‚   â”œâ”€â”€ Clients/                    # PLC å®¢æˆ·ç«¯å®ç°
â”‚   â”œâ”€â”€ DataAcquisitions/           # æ•°æ®é‡‡é›†æœåŠ¡
â”‚   â”œâ”€â”€ DataStorages/               # æ•°æ®å­˜å‚¨æœåŠ¡
â”‚   â””â”€â”€ Metrics/                    # æŒ‡æ ‡æ”¶é›†
â”œâ”€â”€ src/DataAcquisition.Edge.Agent/ # Edge Agent - è½¦é—´ä¾§é‡‡é›†åå° + æŒ‡æ ‡ + æœ¬åœ° API
â”‚   â”œâ”€â”€ Configs/                    # è®¾å¤‡é…ç½®æ–‡ä»¶
â”‚   â””â”€â”€ Controllers/                # ç®¡ç† API æ§åˆ¶å™¨
â”œâ”€â”€ src/DataAcquisition.Central.Api/ # Central API - ä¸­å¿ƒä¾§ APIï¼ˆè¾¹ç¼˜æ³¨å†Œ/å¿ƒè·³/æ•°æ®æ¥å…¥ã€æŸ¥è¯¢ä¸ç®¡ç†ï¼‰
â”œâ”€â”€ src/DataAcquisition.Central.Web/ # Central Web - çº¯å‰ç«¯ï¼ˆVue CLI / Vue3ï¼‰ï¼Œé€šè¿‡ /api è®¿é—® Central API
â”œâ”€â”€ src/DataAcquisition.Simulator/      # PLC æ¨¡æ‹Ÿå™¨ - ç”¨äºæµ‹è¯•
â”‚   â”œâ”€â”€ Simulator.cs               # æ¨¡æ‹Ÿå™¨æ ¸å¿ƒé€»è¾‘
â”‚   â”œâ”€â”€ Program.cs                 # ç¨‹åºå…¥å£
â”‚   â””â”€â”€ README.md                  # æ¨¡æ‹Ÿå™¨æ–‡æ¡£
â””â”€â”€ DataAcquisition.sln             # è§£å†³æ–¹æ¡ˆæ–‡ä»¶
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

æƒ³è¦å¿«é€Ÿå¼€å§‹ä½¿ç”¨ç³»ç»Ÿï¼Ÿè¯·æŸ¥çœ‹ [å¿«é€Ÿå¼€å§‹æŒ‡å—](docs/getting-started.md)ï¼Œè¯¥æŒ‡å—æä¾›äº†ä»é›¶å¼€å§‹çš„å®Œæ•´æ­¥éª¤ï¼ŒåŒ…æ‹¬ï¼š

- ç¯å¢ƒè¦æ±‚å’Œå®‰è£…æ­¥éª¤
- InfluxDB é…ç½®è¯´æ˜
- è®¾å¤‡é…ç½®æ–‡ä»¶åˆ›å»º
- ç³»ç»Ÿå¯åŠ¨å’ŒéªŒè¯
- ä½¿ç”¨ PLC æ¨¡æ‹Ÿå™¨è¿›è¡Œæµ‹è¯•

> **æç¤º**: å¦‚æœä½ æ˜¯ç¬¬ä¸€æ¬¡ä½¿ç”¨ï¼Œå»ºè®®æŒ‰ç…§ [å¿«é€Ÿå¼€å§‹æŒ‡å—](docs/getting-started.md) çš„æ­¥éª¤æ“ä½œã€‚å¦‚æœä½ å·²ç»ç†Ÿæ‚‰ç³»ç»Ÿï¼Œå¯ä»¥ç›´æ¥æŸ¥çœ‹ [é…ç½®è¯´æ˜](docs/configuration.md) å’Œ [API ä½¿ç”¨ç¤ºä¾‹](docs/api-usage.md)ã€‚

### ğŸ§ª ä½¿ç”¨ PLC æ¨¡æ‹Ÿå™¨è¿›è¡Œæµ‹è¯•

é¡¹ç›®æä¾›äº†ç‹¬ç«‹çš„ PLC æ¨¡æ‹Ÿå™¨ï¼ˆ`DataAcquisition.Simulator`ï¼‰ï¼Œå¯ä»¥æ¨¡æ‹Ÿä¸‰è± PLC çš„è¡Œä¸ºï¼Œç”¨äºæµ‹è¯•æ•°æ®é‡‡é›†åŠŸèƒ½ï¼Œæ— éœ€çœŸå®çš„ PLC è®¾å¤‡ã€‚

#### å¯åŠ¨æ¨¡æ‹Ÿå™¨

```bash
cd src/DataAcquisition.Simulator
dotnet run
```

#### æ¨¡æ‹Ÿå™¨ç‰¹æ€§

- âœ… æ¨¡æ‹Ÿä¸‰è± PLCï¼ˆMelsecA1EServerï¼‰
- âœ… è‡ªåŠ¨æ›´æ–°å¿ƒè·³å¯„å­˜å™¨ï¼ˆD100ï¼‰
- âœ… æ¨¡æ‹Ÿ 7 ä¸ªä¼ æ„Ÿå™¨æŒ‡æ ‡ï¼ˆæ¸©åº¦ã€å‹åŠ›ã€ç”µæµã€ç”µå‹ã€å…‰æ …ä½ç½®ã€ä¼ºæœé€Ÿåº¦ã€ç”Ÿäº§åºå·ï¼‰
- âœ… æ”¯æŒæ¡ä»¶é‡‡é›†æµ‹è¯•ï¼ˆç”Ÿäº§åºå·è§¦å‘ï¼‰
- âœ… äº¤äº’å¼å‘½ä»¤æ§åˆ¶ï¼ˆset/get/info/exitï¼‰
- âœ… å®æ—¶æ•°æ®æ˜¾ç¤º

#### å¿«é€Ÿæµ‹è¯•æµç¨‹

1. **å¯åŠ¨æ¨¡æ‹Ÿå™¨**ï¼š

```bash
cd src/DataAcquisition.Simulator
dotnet run
```

2. **é…ç½®æµ‹è¯•è®¾å¤‡**ï¼š

   åœ¨ `src/DataAcquisition.Edge.Agent/Configs/` ç›®å½•åˆ›å»º `TEST_PLC.json`ï¼ˆå‚è€ƒ `src/DataAcquisition.Simulator/README.md` ä¸­çš„å®Œæ•´é…ç½®ç¤ºä¾‹ï¼‰

3. **å¯åŠ¨é‡‡é›†ç³»ç»Ÿ**ï¼š

```bash
dotnet run --project src/DataAcquisition.Edge.Agent
dotnet run --project src/DataAcquisition.Central.Api

cd src/DataAcquisition.Central.Web
npm install
npm run serve
```

4. **è§‚å¯Ÿæ•°æ®é‡‡é›†**ï¼š
   - è®¿é—® http://localhost:3000 æŸ¥çœ‹ä¸­å¿ƒ UIï¼ˆEdges/Metrics/Logsï¼‰
   - è®¿é—® http://localhost:8000/metrics æŸ¥çœ‹ä¸­å¿ƒ API è‡ªèº«æŒ‡æ ‡é¡µé¢
   - æ£€æŸ¥ InfluxDB ä¸­çš„ `sensor` å’Œ `production` measurement

è¯¦ç»†è¯´æ˜è¯·å‚è€ƒï¼š[src/DataAcquisition.Simulator/README.md](src/DataAcquisition.Simulator/README.md)

## ğŸ“š æ–‡æ¡£å¯¼èˆª

æ ¹æ®ä½ çš„ä½¿ç”¨åœºæ™¯ï¼Œé€‰æ‹©åˆé€‚çš„æ–‡æ¡£é˜…è¯»è·¯å¾„ï¼š

### æ–°ç”¨æˆ·å…¥é—¨

å¦‚æœä½ æ˜¯ç¬¬ä¸€æ¬¡ä½¿ç”¨æœ¬ç³»ç»Ÿï¼Œå»ºè®®æŒ‰ä»¥ä¸‹é¡ºåºé˜…è¯»ï¼š

1. **[å¿«é€Ÿå¼€å§‹æŒ‡å—](docs/getting-started.md)** - ä»é›¶å¼€å§‹ï¼Œå¿«é€Ÿä¸Šæ‰‹ç³»ç»Ÿ
   - ç¯å¢ƒè¦æ±‚å’Œå®‰è£…æ­¥éª¤
   - ç³»ç»Ÿé…ç½®å’Œå¯åŠ¨
   - ä½¿ç”¨ PLC æ¨¡æ‹Ÿå™¨æµ‹è¯•

2. **[é…ç½®è¯´æ˜](docs/configuration.md)** - äº†è§£å¦‚ä½•é…ç½®ç³»ç»Ÿ
   - è®¾å¤‡é…ç½®æ–‡ä»¶è¯¦è§£
   - åº”ç”¨é…ç½®è¯´æ˜
   - é…ç½®ç¤ºä¾‹å’Œä½¿ç”¨åœºæ™¯

3. **[å¸¸è§é—®é¢˜](docs/faq.md)** - é‡åˆ°é—®é¢˜æ—¶çš„å‚è€ƒ
   - å¸¸è§é—®é¢˜è§£ç­”
   - æ•…éšœæ’æŸ¥æŒ‡å—
   - é…ç½®éªŒè¯æ–¹æ³•

### æ—¥å¸¸ä½¿ç”¨

å¦‚æœä½ å·²ç»ç†Ÿæ‚‰ç³»ç»Ÿï¼Œéœ€è¦æ—¥å¸¸ä½¿ç”¨å’Œç»´æŠ¤ï¼š

- **[API ä½¿ç”¨ç¤ºä¾‹](docs/api-usage.md)** - æŸ¥è¯¢æ•°æ®å’Œç®¡ç†ç³»ç»Ÿ
  - æŒ‡æ ‡æ•°æ®æŸ¥è¯¢
  - PLC è¿æ¥çŠ¶æ€æŸ¥è¯¢
  - æ—¥å¿—æŸ¥è¯¢å’Œç®¡ç†

- **[æ€§èƒ½ä¼˜åŒ–å»ºè®®](docs/performance.md)** - ä¼˜åŒ–ç³»ç»Ÿæ€§èƒ½
  - é‡‡é›†å‚æ•°è°ƒä¼˜
  - å­˜å‚¨ä¼˜åŒ–ç­–ç•¥
  - ç³»ç»Ÿèµ„æºä¼˜åŒ–

### æ·±å…¥äº†è§£

å¦‚æœä½ æƒ³æ·±å…¥äº†è§£ç³»ç»Ÿæ¶æ„å’Œå®ç°ï¼š

- **[æ ¸å¿ƒæ¨¡å—æ–‡æ¡£](docs/modules.md)** - äº†è§£ç³»ç»Ÿæ ¸å¿ƒæ¨¡å—
  - PLC å®¢æˆ·ç«¯å®ç°
  - é€šé“é‡‡é›†å™¨
  - æ•°æ®å­˜å‚¨æœåŠ¡

- **[æ•°æ®å¤„ç†æµç¨‹](docs/data-flow.md)** - ç†è§£æ•°æ®æµè½¬è¿‡ç¨‹
  - æ­£å¸¸å¤„ç†æµç¨‹
  - å¼‚å¸¸å¤„ç†æœºåˆ¶
  - æ•°æ®ä¸€è‡´æ€§ä¿è¯

- **[è®¾è®¡ç†å¿µ](docs/design.md)** - äº†è§£ç³»ç»Ÿè®¾è®¡æ€æƒ³
  - WAL-first æ¶æ„
  - æ¨¡å—åŒ–è®¾è®¡
  - åˆ†å¸ƒå¼æ¶æ„

## âš™ï¸ é…ç½®è¯´æ˜

è¯¦ç»†çš„é…ç½®è¯´æ˜è¯·å‚è€ƒï¼š[é…ç½®æ–‡æ¡£](docs/configuration.md)

### å¿«é€Ÿå‚è€ƒ

| é…ç½®ç±»å‹ | ä½ç½® | è¯´æ˜ |
|---------|------|------|
| è®¾å¤‡é…ç½® | `src/DataAcquisition.Edge.Agent/Configs/*.json` | æ¯ä¸ª PLC è®¾å¤‡å¯¹åº”ä¸€ä¸ª JSON é…ç½®æ–‡ä»¶ |
| Edge Agent é…ç½® | `src/DataAcquisition.Edge.Agent/appsettings.json` | åº”ç”¨å±‚é…ç½®ï¼ˆæ•°æ®åº“ã€API ç­‰ï¼‰ |
| é…ç½®çƒ­æ›´æ–° | è‡ªåŠ¨æ£€æµ‹ | æ”¯æŒé…ç½®æ–‡ä»¶ä¿®æ”¹åè‡ªåŠ¨çƒ­åŠ è½½ï¼Œæ— éœ€é‡å¯æœåŠ¡ |

**è®¾å¤‡é…ç½®ç¤ºä¾‹ï¼š**

```json
{
  "IsEnabled": true,
  "PLCCode": "PLC01",
  "Host": "192.168.1.100",
  "Port": 502,
  "Type": "Mitsubishi",
  "Channels": [
    {
      "Measurement": "sensor",
      "ChannelCode": "PLC01C01",
      "AcquisitionInterval": 100,
      "AcquisitionMode": "Always",
      "DataPoints": [...]
    }
  ]
}
```


## ğŸ¤ è´¡çŒ®æŒ‡å—

æˆ‘ä»¬æ¬¢è¿å„ç§å½¢å¼çš„è´¡çŒ®ï¼è¯·å‚è€ƒä»¥ä¸‹æ­¥éª¤ï¼š

1. Fork æœ¬é¡¹ç›®
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. å¼€å¯ Pull Request

### å¼€å‘ç¯å¢ƒè®¾ç½®

```bash
# å…‹éš†é¡¹ç›®
git clone https://github.com/liuweichaox/DataAcquisition.git

# å®‰è£…ä¾èµ–
dotnet restore

# è¿è¡Œæµ‹è¯•
dotnet test

# æ„å»ºé¡¹ç›®
dotnet build
```

### ä»£ç è§„èŒƒ

- éµå¾ª .NET ç¼–ç è§„èŒƒ
- ä½¿ç”¨æœ‰æ„ä¹‰çš„å‘½å
- æ·»åŠ å¿…è¦çš„ XML æ³¨é‡Š
- ç¼–å†™å•å…ƒæµ‹è¯•

## ğŸ“„ å¼€æºè®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶ã€‚

## ğŸ™ è‡´è°¢

æ„Ÿè°¢ä»¥ä¸‹å¼€æºé¡¹ç›®ï¼š

- [.NET](https://dotnet.microsoft.com/) - å¼ºå¤§çš„å¼€å‘å¹³å°
- [InfluxDB](https://www.influxdata.com/) - é«˜æ€§èƒ½æ—¶åºæ•°æ®åº“
- [Prometheus](https://prometheus.io/) - ç›‘æ§ç³»ç»Ÿ
- [Vue.js](https://vuejs.org/) - æ¸è¿›å¼ JavaScript æ¡†æ¶

---

**å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·æäº¤ [Issue](https://github.com/liuweichaox/DataAcquisition/issues) æˆ–é€šè¿‡ Pull Request è´¡çŒ®ä»£ç ï¼**
