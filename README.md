# ğŸ›°ï¸ DataAcquisition - å·¥ä¸šçº§ PLC æ•°æ®é‡‡é›†ç³»ç»Ÿ

[![.NET](https://img.shields.io/badge/.NET-10.0%20%7C%208.0-512BD4?logo=dotnet)](https://dotnet.microsoft.com/)
[![License: MIT](https://img.shields.io/badge/License-MIT-blue.svg)](LICENSE)
[![Platform](https://img.shields.io/badge/Platform-Windows%20%7C%20Linux%20%7C%20macOS-lightgrey)](https://dotnet.microsoft.com/)
[![Build Status](https://img.shields.io/badge/build-passing-brightgreen)]()
[![Version](https://img.shields.io/badge/version-1.0.0-blue)]()
[![PRs Welcome](https://img.shields.io/badge/PRs-welcome-brightgreen.svg)]()

English: [README.en.md](README.en.md)

## ğŸ“‹ ç›®å½•

- [ğŸ“– é¡¹ç›®ç®€ä»‹](#-é¡¹ç›®ç®€ä»‹)
- [ğŸ¯ æ ¸å¿ƒç‰¹æ€§](#-æ ¸å¿ƒç‰¹æ€§)
- [ğŸ—ï¸ ç³»ç»Ÿæ¶æ„](#-ç³»ç»Ÿæ¶æ„)
- [ğŸ“ é¡¹ç›®ç»“æ„](#-é¡¹ç›®ç»“æ„)
- [ğŸš€ å¿«é€Ÿå¼€å§‹](#-å¿«é€Ÿå¼€å§‹)
- [âš™ï¸ é…ç½®è¯´æ˜](docs/configuration.md)
- [ğŸ”Œ API ä½¿ç”¨ç¤ºä¾‹](docs/api-usage.md)
- [ğŸ“Š æ ¸å¿ƒæ¨¡å—æ–‡æ¡£](docs/modules.md)
- [ğŸ”„ æ•°æ®å¤„ç†æµç¨‹](docs/data-flow.md)
- [ğŸ¯ æ€§èƒ½ä¼˜åŒ–å»ºè®®](docs/performance.md)
- [â“ å¸¸è§é—®é¢˜](docs/faq.md)
- [ğŸ† è®¾è®¡ç†å¿µ](docs/design.md)
- [ğŸ¤ è´¡çŒ®æŒ‡å—](#-è´¡çŒ®æŒ‡å—)
- [ğŸ“„ å¼€æºåè®®](#-å¼€æºåè®®)
- [ğŸ™ è‡´è°¢](#-è‡´è°¢)

## ğŸ“– é¡¹ç›®ç®€ä»‹

DataAcquisition æ˜¯ä¸€ä¸ªåŸºäº .NET æ„å»ºçš„é«˜æ€§èƒ½ã€é«˜å¯é æ€§çš„å·¥ä¸šæ•°æ®é‡‡é›†ç³»ç»Ÿï¼Œä¸“é—¨ä¸º PLCï¼ˆå¯ç¼–ç¨‹é€»è¾‘æ§åˆ¶å™¨ï¼‰æ•°æ®é‡‡é›†åœºæ™¯è®¾è®¡ã€‚ç³»ç»Ÿæ”¯æŒ .NET 10.0 å’Œ .NET 8.0 ä¸¤ä¸ª LTS ç‰ˆæœ¬ï¼Œé‡‡ç”¨ WAL-first æ¶æ„ï¼Œç¡®ä¿æ•°æ®é›¶ä¸¢å¤±ï¼Œæ”¯æŒå¤š PLC å¹¶è¡Œé‡‡é›†ã€æ¡ä»¶è§¦å‘é‡‡é›†ã€æ‰¹é‡è¯»å–ç­‰é«˜çº§åŠŸèƒ½ã€‚

### ğŸ¯ æ ¸å¿ƒç‰¹æ€§

- âœ… **WAL-first æ¶æ„** - å†™å‰æ—¥å¿—ä¿è¯æ•°æ®ä¸ä¸¢å¤±
- âœ… **å¤š PLC å¹¶è¡Œé‡‡é›†** - æ”¯æŒå¤šç§ PLC åè®®ï¼ˆModbus, Beckhoff ADS, Inovance, Mitsubishi, Siemensï¼‰
- âœ… **æ¡ä»¶è§¦å‘é‡‡é›†** - æ”¯æŒè¾¹æ²¿è§¦å‘ã€å€¼å˜åŒ–è§¦å‘ç­‰æ™ºèƒ½é‡‡é›†æ¨¡å¼
- âœ… **æ‰¹é‡è¯»å–ä¼˜åŒ–** - å‡å°‘ç½‘ç»œå¾€è¿”ï¼Œæå‡é‡‡é›†æ•ˆç‡
- âœ… **é…ç½®çƒ­æ›´æ–°** - JSON é…ç½® + æ–‡ä»¶ç›‘æ§ï¼Œæ— éœ€é‡å¯
- âœ… **å®æ—¶ç›‘æ§** - Prometheus æŒ‡æ ‡ + Vue3 å¯è§†åŒ–ç•Œé¢
- âœ… **åŒå­˜å‚¨ç­–ç•¥** - InfluxDB + Parquet æœ¬åœ°æŒä¹…åŒ–
- âœ… **è‡ªåŠ¨é‡è¯•æœºåˆ¶** - ç½‘ç»œå¼‚å¸¸è‡ªåŠ¨é‡è¿ï¼Œæ•°æ®é‡ä¼ 

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

### åˆ†å¸ƒå¼æ¶æ„æ¦‚è§ˆ

ç³»ç»Ÿé‡‡ç”¨ **Edge-Centralï¼ˆè¾¹ç¼˜-ä¸­å¿ƒï¼‰** åˆ†å¸ƒå¼æ¶æ„ï¼Œæ”¯æŒå¤šè½¦é—´ã€å¤šèŠ‚ç‚¹çš„é›†ä¸­å¼ç®¡ç†ï¼š

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚           Central Web (Vue3)            â”‚
                    â”‚            å¯è§†åŒ–ç•Œé¢ / ç›‘æ§é¢æ¿           â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                        â”‚ HTTP/API
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚         Central API                     â”‚
                    â”‚  â€¢ è¾¹ç¼˜èŠ‚ç‚¹æ³¨å†Œ/å¿ƒè·³ç®¡ç†                   â”‚
                    â”‚  â€¢ é¥æµ‹æ•°æ®æ¥å…¥                           â”‚
                    â”‚  â€¢ æŸ¥è¯¢ä¸ç®¡ç†æ¥å£                         â”‚
                    â”‚  â€¢ Prometheus æŒ‡æ ‡èšåˆ                   â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚                     â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚                                               â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   Edge Agent #1   â”‚                          â”‚   Edge Agent #N   â”‚
    â”‚      (Node 1)     â”‚                          â”‚      (Node N)     â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚                                              â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Edge Agent å†…éƒ¨æ¶æ„

æ¯ä¸ª Edge Agent å†…éƒ¨é‡‡ç”¨åˆ†å±‚æ¶æ„ï¼Œç¡®ä¿æ•°æ®é›¶ä¸¢å¤±ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        PLC Device          â”‚â”€â”€â”€â”€â”€â”€â–¶ â”‚  Heartbeat Monitor Layer â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Data Acquisition Layer   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    Queue Service Layer     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          Storage Layer     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      WAL Persistence       â”‚â”€â”€â”€â”€â”€â”€â–¶ â”‚ Time-Series Database Storage â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚                                 â”‚
                 â–¼                                 â”‚  Write Failed
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”‚
â”‚      Retry Worker          â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ ¸å¿ƒæ•°æ®æµ

#### Edge Agent å†…éƒ¨æµç¨‹

1. **é‡‡é›†é˜¶æ®µ**: PLC â†’ ChannelCollectorï¼ˆæ”¯æŒæ¡ä»¶è§¦å‘ã€æ‰¹é‡è¯»å–ï¼‰
2. **èšåˆé˜¶æ®µ**: LocalQueueServiceï¼ˆæŒ‰ BatchSize èšåˆæ•°æ®ï¼‰
3. **æŒä¹…åŒ–é˜¶æ®µ**:
   - Parquet WALï¼ˆç«‹å³å†™å…¥æœ¬åœ°ï¼Œç¡®ä¿é›¶ä¸¢å¤±ï¼‰
   - InfluxDBï¼ˆç«‹å³å†™å…¥æ—¶åºæ•°æ®åº“ï¼‰
4. **å®¹é”™é˜¶æ®µ**: æˆåŠŸåˆ é™¤ WAL æ–‡ä»¶ï¼Œå¤±è´¥ç”± RetryWorker é‡è¯•
5. **ä¸ŠæŠ¥é˜¶æ®µ**: æ•°æ®ä¸ŠæŠ¥åˆ° Central APIï¼ˆå¯é€‰ï¼Œç”¨äºé›†ä¸­å¼ç®¡ç†ï¼‰

#### Edge-Central äº¤äº’æµç¨‹

1. **æ³¨å†Œé˜¶æ®µ**: Edge Agent å¯åŠ¨æ—¶å‘ Central API æ³¨å†Œï¼ˆEdgeIdã€AgentBaseUrlã€Hostnameï¼‰
2. **å¿ƒè·³é˜¶æ®µ**: å‘¨æœŸæ€§å‘é€å¿ƒè·³ï¼ˆé»˜è®¤ 10 ç§’ï¼‰ï¼ŒåŒ…å«ç§¯å‹é‡ã€é”™è¯¯ä¿¡æ¯
3. **é¥æµ‹é˜¶æ®µ**: æ‰¹é‡ä¸ŠæŠ¥é‡‡é›†æ•°æ®åˆ° Central APIï¼ˆå¯é€‰ï¼‰
4. **ç›‘æ§é˜¶æ®µ**: Central Web é€šè¿‡ Central API æŸ¥è¯¢è¾¹ç¼˜èŠ‚ç‚¹çŠ¶æ€å’ŒæŒ‡æ ‡

## ğŸ“ é¡¹ç›®ç»“æ„

```
DataAcquisition/
â”œâ”€â”€ src/DataAcquisition.Application/     # åº”ç”¨å±‚ - æ¥å£å®šä¹‰
â”‚   â”œâ”€â”€ Abstractions/               # æ ¸å¿ƒæ¥å£æŠ½è±¡
â”‚   â””â”€â”€ PLCRuntime.cs              # PLC è¿è¡Œæ—¶æšä¸¾
â”œâ”€â”€ src/DataAcquisition.Contracts/       # å¥‘çº¦å±‚ - å¯¹å¤– DTO/åè®®æ¨¡å‹
â”œâ”€â”€ src/DataAcquisition.Domain/         # é¢†åŸŸå±‚ - æ ¸å¿ƒæ¨¡å‹
â”‚   â”œâ”€â”€ Models/                     # æ•°æ®æ¨¡å‹
â”‚   â””â”€â”€ OperationalEvents/          # æ“ä½œäº‹ä»¶
â”œâ”€â”€ src/DataAcquisition.Infrastructure/ # åŸºç¡€è®¾æ–½å±‚ - å®ç°
â”‚   â”œâ”€â”€ Clients/                    # PLC å®¢æˆ·ç«¯å®ç°
â”‚   â”œâ”€â”€ DataAcquisitions/           # æ•°æ®é‡‡é›†æœåŠ¡
â”‚   â”œâ”€â”€ DataStorages/               # æ•°æ®å­˜å‚¨æœåŠ¡
â”‚   â””â”€â”€ Metrics/                    # æŒ‡æ ‡æ”¶é›†
â”œâ”€â”€ src/DataAcquisition.Edge.Agent/ # Edge Agent - è½¦é—´ä¾§é‡‡é›†åå° + æŒ‡æ ‡ + æœ¬åœ° API
â”‚   â”œâ”€â”€ Configs/                    # è®¾å¤‡é…ç½®æ–‡ä»¶
â”‚   â””â”€â”€ Controllers/                # ç®¡ç† API æ§åˆ¶å™¨
â”œâ”€â”€ src/DataAcquisition.Central.Api/ # Central API - ä¸­å¿ƒä¾§ APIï¼ˆè¾¹ç¼˜æ³¨å†Œ/å¿ƒè·³/æ•°æ®æ¥å…¥ã€æŸ¥è¯¢ä¸ç®¡ç†ï¼‰
â”œâ”€â”€ src/DataAcquisition.Central.Web/ # Central Web - çº¯å‰ç«¯ï¼ˆVue CLI / Vue3ï¼‰ï¼Œé€šè¿‡ /api è®¿é—® Central API
â”œâ”€â”€ src/DataAcquisition.Simulator/      # PLC æ¨¡æ‹Ÿå™¨ - ç”¨äºæµ‹è¯•
â”‚   â”œâ”€â”€ Simulator.cs               # æ¨¡æ‹Ÿå™¨æ ¸å¿ƒé€»è¾‘
â”‚   â”œâ”€â”€ Program.cs                 # ç¨‹åºå…¥å£
â”‚   â””â”€â”€ README.md                  # æ¨¡æ‹Ÿå™¨æ–‡æ¡£
â””â”€â”€ DataAcquisition.sln             # è§£å†³æ–¹æ¡ˆæ–‡ä»¶
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- .NET 10.0 æˆ– .NET 8.0 SDKï¼ˆæ¨èä½¿ç”¨æœ€æ–° LTS ç‰ˆæœ¬ï¼‰
- Node.jsï¼ˆå»ºè®® 18+ï¼‰+ npmï¼ˆç”¨äºè¿è¡Œ Central Web å‰ç«¯ï¼‰
- InfluxDB 2.x (å¯é€‰ï¼Œç”¨äºæ—¶åºæ•°æ®å­˜å‚¨)
- æ”¯æŒçš„ PLC è®¾å¤‡ï¼ˆModbus TCP, Beckhoff ADS, Inovance, Mitsubishi, Siemensï¼‰

> **æ³¨æ„**: é¡¹ç›®æ”¯æŒå¤šç›®æ ‡æ¡†æ¶ï¼ˆ.NET 10.0ã€.NET 8.0ï¼‰ï¼Œå¯æ ¹æ®éƒ¨ç½²ç¯å¢ƒé€‰æ‹©åˆé€‚çš„ç‰ˆæœ¬ã€‚ä¸¤ä¸ªç‰ˆæœ¬å‡ä¸º LTSï¼ˆé•¿æœŸæ”¯æŒï¼‰ç‰ˆæœ¬ï¼Œé€‚åˆç”Ÿäº§ç¯å¢ƒä½¿ç”¨ã€‚
>
> **ç‰ˆæœ¬é€‰æ‹©å»ºè®®**:
>
> - **.NET 10.0**: æœ€æ–° LTS ç‰ˆæœ¬ï¼Œæ”¯æŒè‡³ 2028 å¹´ï¼Œæ¨èç”¨äºæ–°éƒ¨ç½²
> - **.NET 8.0**: ç¨³å®š LTS ç‰ˆæœ¬ï¼Œæ”¯æŒè‡³ 2026 å¹´ï¼Œæ¨èç”¨äºç”Ÿäº§ç¯å¢ƒ

### å®‰è£…æ­¥éª¤

1. **å…‹éš†é¡¹ç›®**

```bash
git clone https://github.com/liuweichaox/DataAcquisition.git
cd DataAcquisition
```

2. **æ¢å¤ä¾èµ–**

```bash
dotnet restore
```

3. **é…ç½®è®¾å¤‡**
   åœ¨ `src/DataAcquisition.Edge.Agent/Configs/` ç›®å½•åˆ›å»º/ç¼–è¾‘è®¾å¤‡é…ç½®æ–‡ä»¶ï¼ˆä¾‹å¦‚é¡¹ç›®å·²æä¾› `TEST_PLC.json`ï¼Œä¹Ÿå¯æŒ‰éœ€æ–°å¢ `*.json`ï¼‰ã€‚

4. **è¿è¡Œç³»ç»Ÿ**

```bash
# å¯åŠ¨ä¸­å¿ƒä¾§ APIï¼ˆCentral APIï¼Œé»˜è®¤ http://localhost:8000ï¼‰
dotnet run --project src/DataAcquisition.Central.Api

# å¯åŠ¨è½¦é—´ä¾§é‡‡é›†ï¼ˆEdge Agentï¼‰
dotnet run --project src/DataAcquisition.Edge.Agent

# å¯åŠ¨ä¸­å¿ƒå‰ç«¯ï¼ˆCentral Webï¼ŒVue CLI dev serverï¼Œé»˜è®¤ http://localhost:3000ï¼‰
cd src/DataAcquisition.Central.Web
npm install
npm run serve

# å¯é€‰ï¼šæ˜¾å¼æŒ‡å®šæ¡†æ¶è¿è¡Œ
dotnet run -f net8.0 --project src/DataAcquisition.Edge.Agent
dotnet run -f net8.0 --project src/DataAcquisition.Central.Api
dotnet run -f net10.0 --project src/DataAcquisition.Edge.Agent
dotnet run -f net10.0 --project src/DataAcquisition.Central.Api
```

> è¯´æ˜ï¼šé¡¹ç›®é»˜è®¤åœ¨ **ä»…å®‰è£… .NET 8 SDK** çš„ç¯å¢ƒä¸‹æ„å»º/è¿è¡Œ `net8.0`ï¼›å½“æ£€æµ‹åˆ° **SDK >= 10** æ—¶ï¼Œä¼šè‡ªåŠ¨å¯ç”¨ `net10.0` å¤šç›®æ ‡ã€‚
>
> é»˜è®¤ç«¯å£ï¼š
>
> - Central APIï¼š`http://localhost:8000`
> - Central Webï¼ˆVue dev serverï¼‰ï¼š`http://localhost:3000`ï¼ˆå·²åœ¨ `vue.config.js` é‡Œå°† `/api`ã€`/metrics` ä»£ç†åˆ° `http://localhost:8000`ï¼‰
> - Edge Agentï¼š`http://localhost:8001`

5. **æ„å»ºç‰¹å®šæ¡†æ¶**

```bash
# æ„å»ºæ‰€æœ‰ç›®æ ‡æ¡†æ¶
dotnet build

# æ„å»ºç‰¹å®šæ¡†æ¶
dotnet build -f net10.0
dotnet build -f net8.0
```

6. **è®¿é—®ç›‘æ§ç•Œé¢**

- Central Webï¼ˆå‰ç«¯ UIï¼‰: http://localhost:3000
- Prometheus æŒ‡æ ‡: http://localhost:8000/metrics
- API æ–‡æ¡£: æœªé…ç½® Swaggerï¼ˆå¯é€šè¿‡ä»£ç å¯ç”¨ï¼‰

### ğŸ§ª ä½¿ç”¨ PLC æ¨¡æ‹Ÿå™¨è¿›è¡Œæµ‹è¯•

é¡¹ç›®æä¾›äº†ç‹¬ç«‹çš„ PLC æ¨¡æ‹Ÿå™¨ï¼ˆ`DataAcquisition.Simulator`ï¼‰ï¼Œå¯ä»¥æ¨¡æ‹Ÿä¸‰è± PLC çš„è¡Œä¸ºï¼Œç”¨äºæµ‹è¯•æ•°æ®é‡‡é›†åŠŸèƒ½ï¼Œæ— éœ€çœŸå®çš„ PLC è®¾å¤‡ã€‚

#### å¯åŠ¨æ¨¡æ‹Ÿå™¨

```bash
cd src/DataAcquisition.Simulator
dotnet run
```

#### æ¨¡æ‹Ÿå™¨ç‰¹æ€§

- âœ… æ¨¡æ‹Ÿä¸‰è± PLCï¼ˆMelsecA1EServerï¼‰
- âœ… è‡ªåŠ¨æ›´æ–°å¿ƒè·³å¯„å­˜å™¨ï¼ˆD100ï¼‰
- âœ… æ¨¡æ‹Ÿ 7 ä¸ªä¼ æ„Ÿå™¨æŒ‡æ ‡ï¼ˆæ¸©åº¦ã€å‹åŠ›ã€ç”µæµã€ç”µå‹ã€å…‰æ …ä½ç½®ã€ä¼ºæœé€Ÿåº¦ã€ç”Ÿäº§åºå·ï¼‰
- âœ… æ”¯æŒæ¡ä»¶é‡‡é›†æµ‹è¯•ï¼ˆç”Ÿäº§åºå·è§¦å‘ï¼‰
- âœ… äº¤äº’å¼å‘½ä»¤æ§åˆ¶ï¼ˆset/get/info/exitï¼‰
- âœ… å®æ—¶æ•°æ®æ˜¾ç¤º

#### å¿«é€Ÿæµ‹è¯•æµç¨‹

1. **å¯åŠ¨æ¨¡æ‹Ÿå™¨**ï¼š

```bash
cd src/DataAcquisition.Simulator
dotnet run
```

2. **é…ç½®æµ‹è¯•è®¾å¤‡**ï¼š

   åœ¨ `src/DataAcquisition.Edge.Agent/Configs/` ç›®å½•åˆ›å»º `TEST_PLC.json`ï¼ˆå‚è€ƒ `src/DataAcquisition.Simulator/README.md` ä¸­çš„å®Œæ•´é…ç½®ç¤ºä¾‹ï¼‰

3. **å¯åŠ¨é‡‡é›†ç³»ç»Ÿ**ï¼š

```bash
dotnet run --project src/DataAcquisition.Edge.Agent
dotnet run --project src/DataAcquisition.Central.Api

cd src/DataAcquisition.Central.Web
npm install
npm run serve
```

4. **è§‚å¯Ÿæ•°æ®é‡‡é›†**ï¼š
   - è®¿é—® http://localhost:3000 æŸ¥çœ‹ä¸­å¿ƒ UIï¼ˆEdges/Metrics/Logsï¼‰
   - è®¿é—® http://localhost:8000/metrics æŸ¥çœ‹ä¸­å¿ƒ API è‡ªèº«æŒ‡æ ‡é¡µé¢
   - æ£€æŸ¥ InfluxDB ä¸­çš„ `sensor` å’Œ `production` measurement

è¯¦ç»†è¯´æ˜è¯·å‚è€ƒï¼š[src/DataAcquisition.Simulator/README.md](src/DataAcquisition.Simulator/README.md)

## âš™ï¸ é…ç½®è¯´æ˜

è¯¦ç»†çš„é…ç½®è¯´æ˜è¯·å‚è€ƒï¼š[é…ç½®æ–‡æ¡£](docs/configuration.md)

### å¿«é€Ÿå‚è€ƒ

- **è®¾å¤‡é…ç½®æ–‡ä»¶**: å­˜æ”¾åœ¨ `src/DataAcquisition.Edge.Agent/Configs/` ç›®å½•ï¼Œæ ¼å¼ä¸º `*.json`
- **Edge Agent é…ç½®**: ç¼–è¾‘ `src/DataAcquisition.Edge.Agent/appsettings.json`
- **é…ç½®çƒ­æ›´æ–°**: æ”¯æŒé…ç½®æ–‡ä»¶çƒ­æ›´æ–°ï¼Œæ— éœ€é‡å¯æœåŠ¡

åŸºæœ¬é…ç½®ç¤ºä¾‹ï¼š

```json
{
  "IsEnabled": true,
  "PLCCode": "PLC01",
  "Host": "192.168.1.100",
  "Port": 502,
  "Type": "Mitsubishi",
  "Channels": [...]
}
```

## ğŸ”Œ API ä½¿ç”¨ç¤ºä¾‹

è¯¦ç»†çš„ API ä½¿ç”¨ç¤ºä¾‹è¯·å‚è€ƒï¼š[API ä½¿ç”¨æ–‡æ¡£](docs/api-usage.md)

## ğŸ“Š æ ¸å¿ƒæ¨¡å—æ–‡æ¡£

è¯¦ç»†çš„æ¨¡å—æ–‡æ¡£è¯·å‚è€ƒï¼š[æ ¸å¿ƒæ¨¡å—æ–‡æ¡£](docs/modules.md)

## ğŸ”„ æ•°æ®å¤„ç†æµç¨‹

è¯¦ç»†çš„æ•°æ®å¤„ç†æµç¨‹è¯·å‚è€ƒï¼š[æ•°æ®å¤„ç†æµç¨‹æ–‡æ¡£](docs/data-flow.md)

## ğŸ¯ æ€§èƒ½ä¼˜åŒ–å»ºè®®

è¯¦ç»†çš„æ€§èƒ½ä¼˜åŒ–å»ºè®®è¯·å‚è€ƒï¼š[æ€§èƒ½ä¼˜åŒ–æ–‡æ¡£](docs/performance.md)

## â“ å¸¸è§é—®é¢˜ (FAQ)

å¸¸è§é—®é¢˜è§£ç­”è¯·å‚è€ƒï¼š[FAQ æ–‡æ¡£](docs/faq.md)

## ğŸ† è®¾è®¡ç†å¿µ

è¯¦ç»†çš„è®¾è®¡ç†å¿µè¯´æ˜è¯·å‚è€ƒï¼š[è®¾è®¡ç†å¿µæ–‡æ¡£](docs/design.md)

## ğŸ¤ è´¡çŒ®æŒ‡å—

æˆ‘ä»¬æ¬¢è¿å„ç§å½¢å¼çš„è´¡çŒ®ï¼è¯·å‚è€ƒä»¥ä¸‹æ­¥éª¤ï¼š

1. Fork æœ¬é¡¹ç›®
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. å¼€å¯ Pull Request

### å¼€å‘ç¯å¢ƒè®¾ç½®

```bash
# å…‹éš†é¡¹ç›®
git clone https://github.com/liuweichaox/DataAcquisition.git

# å®‰è£…ä¾èµ–
dotnet restore

# è¿è¡Œæµ‹è¯•
dotnet test

# æ„å»ºé¡¹ç›®
dotnet build
```

### ä»£ç è§„èŒƒ

- éµå¾ª .NET ç¼–ç è§„èŒƒ
- ä½¿ç”¨æœ‰æ„ä¹‰çš„å‘½å
- æ·»åŠ å¿…è¦çš„ XML æ³¨é‡Š
- ç¼–å†™å•å…ƒæµ‹è¯•

## ğŸ“„ å¼€æºè®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶ã€‚

## ğŸ™ è‡´è°¢

æ„Ÿè°¢ä»¥ä¸‹å¼€æºé¡¹ç›®ï¼š

- [.NET](https://dotnet.microsoft.com/) - å¼ºå¤§çš„å¼€å‘å¹³å°
- [InfluxDB](https://www.influxdata.com/) - é«˜æ€§èƒ½æ—¶åºæ•°æ®åº“
- [Prometheus](https://prometheus.io/) - ç›‘æ§ç³»ç»Ÿ
- [Vue.js](https://vuejs.org/) - æ¸è¿›å¼ JavaScript æ¡†æ¶

---

**å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·æäº¤ [Issue](https://github.com/liuweichaox/DataAcquisition/issues) æˆ–é€šè¿‡ Pull Request è´¡çŒ®ä»£ç ï¼**
